<!DOCTYPE html>
<html lang="de">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BenLang - Programmieren f√ºr Kinder</title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/project-menu.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs/loader.min.js"></script>
  <script defer src="/js/monaco-setup.js"></script>
  <script defer src="/js/editor.js"></script>
</head>

<body>
  <div class="app">
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <h1 class="logo">üéÆ BenLang</h1>
        <div class="project-selector">
          <span class="project-name" id="projectName">Mein Projekt</span>
          <button class="btn btn-small btn-project" id="btnProjectMenu">Projekt ‚ñæ</button>
          <button class="btn btn-small btn-icon" id="btnShowGallery" title="Bilder-Galerie">üñºÔ∏è</button>
        </div>
      </div>
      <div class="header-center">
        <button class="btn btn-primary" id="btnRun">
          ‚ñ∂ Starten
        </button>
        <button class="btn btn-secondary" id="btnStop">
          ‚¨õ Stoppen
        </button>
      </div>
      <div class="header-right">
        <button class="btn btn-icon" id="btnSave" title="Speichern (Strg+S)">
          üíæ
        </button>
        <button class="btn btn-icon" id="btnHelp" title="Hilfe">
          ‚ùì
        </button>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main">
      <!-- Editor Panel -->
      <div class="panel panel-editor">
        <div class="panel-header">
          <span>Code</span>
          <div class="panel-actions">
            <button class="btn btn-small" id="btnUndo" title="R√ºckg√§ngig (Strg+Z)">‚Ü©Ô∏è R√ºckg√§ngig</button>
            <button class="btn btn-small" id="btnRedo" title="Wiederholen (Strg+Y)">‚Ü™Ô∏è Wiederholen</button>
            <button class="btn btn-small" id="btnCopy" title="Kopieren (Strg+C)">üìã Kopieren</button>
            <button class="btn btn-small" id="btnPaste" title="Einf√ºgen (Strg+V)">üì• Einf√ºgen</button>
          </div>
        </div>
        <div class="editor-container" id="editorContainer">
          <div id="monaco-editor" style="height: 100%; width: 100%;"></div>
        </div>
      </div>

      <!-- Resizer -->
      <div class="resizer" id="resizer"></div>

      <!-- Preview Panel -->
      <div class="panel panel-preview">
        <div class="panel-header">
          <span>Vorschau</span>
          <span class="game-title" id="gameTitle"></span>
        </div>
        <div class="canvas-container">
          <canvas id="gameCanvas" width="800" height="600"></canvas>
        </div>
        <div class="console-container" id="consoleContainer">
          <div class="console-header">Konsole</div>
          <div class="console-output" id="consoleOutput"></div>
        </div>
      </div>
    </main>

    <!-- File Browser -->
    <footer class="footer">
      <div class="file-browser">
        <div class="file-list" id="fileList">
          <!-- Files will be loaded here -->
        </div>
        <button class="btn btn-small" id="btnNewFile" title="Neue Datei">
          + Neu
        </button>
        <button class="btn btn-small" id="btnUploadImage" title="Bild hochladen">
          üñº Bild
        </button>
      </div>
    </footer>

    <!-- Help Modal -->
    <div class="modal" id="helpModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>BenLang Hilfe</h2>
          <button class="modal-close" id="closeHelp">&times;</button>
        </div>
        <div class="modal-body">
          <div class="help-full-link">
            <a href="/hilfe.html" target="_blank" class="btn btn-primary">
              üìñ Vollst√§ndige Dokumentation √∂ffnen
            </a>
          </div>

          <h3>Schnellreferenz</h3>

          <h4>Befehle</h4>
          <table class="help-table">
            <tr>
              <td><code>VAR name = wert</code></td>
              <td>Variable erstellen</td>
            </tr>
            <tr>
              <td><code>FIGUR name = LADE_BILD("bild.png")</code></td>
              <td>Figur laden</td>
            </tr>
            <tr>
              <td><code>WENN bedingung { }</code></td>
              <td>Wenn-Abfrage</td>
            </tr>
            <tr>
              <td><code>SOLANGE bedingung { }</code></td>
              <td>Solange-Schleife</td>
            </tr>
            <tr>
              <td><code>FUER x VON 1 BIS 10 { }</code></td>
              <td>Z√§hlschleife</td>
            </tr>
            <tr>
              <td><code>FUNKTION name() { }</code></td>
              <td>Funktion erstellen</td>
            </tr>
          </table>

          <h4>Spiel-Befehle</h4>
          <table class="help-table">
            <tr>
              <td><code>SPIEL "Name"</code></td>
              <td>Spielname festlegen</td>
            </tr>
            <tr>
              <td><code>WENN_START { }</code></td>
              <td>Beim Spielstart</td>
            </tr>
            <tr>
              <td><code>WENN_IMMER { }</code></td>
              <td>Jeden Frame</td>
            </tr>
            <tr>
              <td><code>WENN_TASTE("links") { }</code></td>
              <td>Bei Tastendruck</td>
            </tr>
            <tr>
              <td><code>WENN_KOLLISION(a, b) { }</code></td>
              <td>Bei Kollision</td>
            </tr>
            <tr>
              <td><code>LOESCHEN(figur)</code></td>
              <td>Figur l√∂schen</td>
            </tr>
            <tr>
              <td><code>GEHE_ZU(figur, x, y)</code></td>
              <td>Figur bewegen</td>
            </tr>
            <tr>
              <td><code>DREHE(figur, grad)</code></td>
              <td>Figur drehen</td>
            </tr>
            <tr>
              <td><code>SKALIERE(figur, faktor)</code></td>
              <td>Gr√∂√üe √§ndern</td>
            </tr>
          </table>

          <h4>Zeichnen</h4>
          <table class="help-table">
            <tr>
              <td><code>ZEIGE_TEXT("Hallo", x, y, farbe, gr√∂√üe)</code></td>
              <td>Text anzeigen</td>
            </tr>
            <tr>
              <td><code>ZEICHNE_RECHTECK(x, y, b, h, farbe)</code></td>
              <td>Rechteck zeichnen</td>
            </tr>
            <tr>
              <td><code>ZEICHNE_KREIS(x, y, radius, farbe)</code></td>
              <td>Kreis zeichnen</td>
            </tr>
            <tr>
              <td><code>ZEICHNE_LINIE(x1, y1, x2, y2, farbe)</code></td>
              <td>Linie zeichnen</td>
            </tr>
          </table>

          <h4>Eingabe</h4>
          <table class="help-table">
            <tr>
              <td><code>TASTE_GEDRUECKT("taste")</code></td>
              <td>Taste gedr√ºckt?</td>
            </tr>
            <tr>
              <td><code>MAUS_X()</code>, <code>MAUS_Y()</code></td>
              <td>Mausposition</td>
            </tr>
            <tr>
              <td><code>MAUS_GEDRUECKT()</code></td>
              <td>Maustaste gedr√ºckt?</td>
            </tr>
            <tr>
              <td><code>ZUFALL(min, max)</code></td>
              <td>Zufallszahl</td>
            </tr>
          </table>

          <h4>Tasten</h4>
          <p><code>"links"</code>, <code>"rechts"</code>, <code>"hoch"</code>, <code>"runter"</code>,
            <code>"leertaste"</code>, <code>"a"</code>-<code>"z"</code>
          </p>

          <h4>Figur-Eigenschaften</h4>
          <table class="help-table">
            <tr>
              <td><code>figur.x</code>, <code>figur.y</code></td>
              <td>Position</td>
            </tr>
            <tr>
              <td><code>figur.breite</code>, <code>figur.hoehe</code></td>
              <td>Gr√∂√üe</td>
            </tr>
            <tr>
              <td><code>figur.drehung</code></td>
              <td>Drehung in Grad</td>
            </tr>
            <tr>
              <td><code>figur.sichtbar</code></td>
              <td>Sichtbar (WAHR/FALSCH)</td>
            </tr>
          </table>
        </div>
      </div>
    </div>

    <!-- Image Upload Modal -->
    <div class="modal" id="uploadModal">
      <div class="modal-content modal-small">
        <div class="modal-header">
          <h2>Bild hochladen</h2>
          <button class="modal-close" id="closeUpload">&times;</button>
        </div>
        <div class="modal-body">
          <input type="file" id="imageInput" accept="image/*">
          <p class="hint">PNG oder JPG Bilder (max. 1MB)</p>
        </div>
      </div>
    </div>

    <!-- Color Picker Popup -->
    <div class="modal" id="colorPickerModal">
      <div class="modal-content modal-small">
        <div class="modal-header">
          <span>Farbe w√§hlen</span>
          <button class="modal-close" id="closeColorPicker">&times;</button>
        </div>
        <div class="modal-body">
          <input type="color" id="colorPickerInput" value="#6bb88a" style="width: 100%; height: 60px; cursor: pointer;">
          <div class="color-picker-preview" style="margin-top: 15px; text-align: center;">
            <span class="color-picker-hex" id="colorPickerHex">#6bb88a</span>
          </div>
          <div class="color-picker-presets"
            style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; margin-top: 15px;">
            <div class="color-preset" data-color="#00d4ff"
              style="background-color: #00d4ff; width: 32px; height: 32px; border-radius: 6px; cursor: pointer; border: 2px solid var(--border);">
            </div>
            <div class="color-preset" data-color="#00ff9d"
              style="background-color: #00ff9d; width: 32px; height: 32px; border-radius: 6px; cursor: pointer; border: 2px solid var(--border);">
            </div>
            <div class="color-preset" data-color="#ffcc00"
              style="background-color: #ffcc00; width: 32px; height: 32px; border-radius: 6px; cursor: pointer; border: 2px solid var(--border);">
            </div>
            <div class="color-preset" data-color="#ff79c6"
              style="background-color: #ff79c6; width: 32px; height: 32px; border-radius: 6px; cursor: pointer; border: 2px solid var(--border);">
            </div>
            <div class="color-preset" data-color="#bd93f9"
              style="background-color: #bd93f9; width: 32px; height: 32px; border-radius: 6px; cursor: pointer; border: 2px solid var(--border);">
            </div>
            <div class="color-preset" data-color="#ffffff"
              style="background-color: #ffffff; width: 32px; height: 32px; border-radius: 6px; cursor: pointer; border: 2px solid var(--border);">
            </div>
            <div class="color-preset" data-color="#0d1117"
              style="background-color: #0d1117; width: 32px; height: 32px; border-radius: 6px; cursor: pointer; border: 2px solid var(--border);">
            </div>
            <div class="color-preset" data-color="#ff6b6b"
              style="background-color: #ff6b6b; width: 32px; height: 32px; border-radius: 6px; cursor: pointer; border: 2px solid var(--border);">
            </div>
            <div class="color-preset" data-color="#8be9fd"
              style="background-color: #8be9fd; width: 32px; height: 32px; border-radius: 6px; cursor: pointer; border: 2px solid var(--border);">
            </div>
            <div class="color-preset" data-color="#50fa7b"
              style="background-color: #50fa7b; width: 32px; height: 32px; border-radius: 6px; cursor: pointer; border: 2px solid var(--border);">
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Project Selection Modal -->
    <div class="modal" id="projectModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Meine Projekte</h2>
          <button class="modal-close" id="closeProjectModal">&times;</button>
        </div>
        <div class="modal-body">
          <p class="hint">W√§hle ein Projekt aus, an dem du weiterarbeiten m√∂chtest:</p>
          <div class="project-list" id="projectList">
            <!-- Project list will be loaded here -->
          </div>
          <div class="project-actions">
            <button class="btn btn-primary" id="btnShowNewProject">‚ú® Neues Projekt erstellen</button>
          </div>
        </div>
      </div>
    </div>

    <!-- New Project Modal -->
    <div class="modal" id="newProjectModal">
      <div class="modal-content modal-small">
        <div class="modal-header">
          <h2>Neues Abenteuer starten</h2>
          <button class="modal-close" id="closeNewProjectModal">&times;</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="newProjectName">Wie soll dein Spiel hei√üen?</label>
            <input type="text" id="newProjectName" placeholder="z.B. MeinSuperSpiel" dir="ltr">
          </div>
          <p class="hint">Es wird ein neuer Ordner f√ºr dein Spiel erstellt.</p>
          <div class="modal-footer">
            <button class="btn btn-primary" id="btnCreateProject">Los geht's!</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Image Gallery Modal -->
    <div class="modal" id="galleryModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Projekt-Bilder</h2>
          <button class="modal-close" id="closeGallery">&times;</button>
        </div>
        <div class="modal-body">
          <div class="gallery-grid" id="galleryGrid">
            <!-- Images will be loaded here -->
          </div>
          <p id="galleryEmptyHint" class="hint" style="text-align: center; display: none; margin: 40px 0;">
            Noch keine Bilder hochgeladen.
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Runtime -->
  <script src="/js/runtime/benlang-runtime.js"></script>
</body>

</html>